- [
  1 背景](http://wiki.baidu.com/pages/viewpage.action?pageId=1247234886#1 背景)
- [2 名词解释](http://wiki.baidu.com/pages/viewpage.action?pageId=1247234886#2 名词解释)
- 3 设计目标
  - [3.1 实现的功能](http://wiki.baidu.com/pages/viewpage.action?pageId=1247234886#3.1 实现的功能)
  - [3.2 设计的性能指标](http://wiki.baidu.com/pages/viewpage.action?pageId=1247234886#3.2 设计的性能指标)
- 4 系统环境（可选）
  - [4.1 假设及与其它模块联系](http://wiki.baidu.com/pages/viewpage.action?pageId=1247234886#4.1 假设及与其它模块联系)
  - [4.2 相关软件及硬件](http://wiki.baidu.com/pages/viewpage.action?pageId=1247234886#4.2 相关软件及硬件)
  - [4.3 模块限制](http://wiki.baidu.com/pages/viewpage.action?pageId=1247234886#4.3 模块限制)
  - [4.4 数据规模估计](http://wiki.baidu.com/pages/viewpage.action?pageId=1247234886#4.4 数据规模估计)
- [5 设计思路及折衷](http://wiki.baidu.com/pages/viewpage.action?pageId=1247234886#5 设计思路及折衷)
- 6 模块设计
  - [6.1 架构图和业务处理流程说明](http://wiki.baidu.com/pages/viewpage.action?pageId=1247234886#6.1 架构图和业务处理流程说明)
  - [6.2 数据结构及说明](http://wiki.baidu.com/pages/viewpage.action?pageId=1247234886#6.2 数据结构及说明)
  - [6.3 算法描述（可选）](http://wiki.baidu.com/pages/viewpage.action?pageId=1247234886#6.3 算法描述（可选）)
  - [6.4 与其它模块的接口](http://wiki.baidu.com/pages/viewpage.action?pageId=1247234886#6.4 与其它模块的接口)
  - [6.5 异常处理](http://wiki.baidu.com/pages/viewpage.action?pageId=1247234886#6.5 异常处理)
  - [6.6 测试考虑](http://wiki.baidu.com/pages/viewpage.action?pageId=1247234886#6.6 测试考虑)
- 7 风险评估及对其它模块/系统影响（可选）
  - [7.1 已知的或可预知的风险](http://wiki.baidu.com/pages/viewpage.action?pageId=1247234886#7.1 已知的或可预知的风险)
  - [7.2 与其它模块/系统可能的影响](http://wiki.baidu.com/pages/viewpage.action?pageId=1247234886#7.2 与其它模块/系统可能的影响)
- [8 数据迁移&刷新（可选）](http://wiki.baidu.com/pages/viewpage.action?pageId=1247234886#8 数据迁移&刷新（可选）)
- [9 安全方案](http://wiki.baidu.com/pages/viewpage.action?pageId=1247234886#9 安全方案)
- [10 设计评审意见](http://wiki.baidu.com/pages/viewpage.action?pageId=1247234886#10 设计评审意见)
- [11 附件及参考资料](http://wiki.baidu.com/pages/viewpage.action?pageId=1247234886#11 附件及参考资料)



| 模块名称     | 内容 |
| :----------- | :--- |
| 所属系统     |      |
| 模块负责人   |      |
| 项目负责人   |      |
| 文档提交日期 | -    |

### 1 背景

*项目背景、需求说明、MRD链接等*

### 2 名词解释（可选）

*对文档中出现新的或不常见的名词、概念或简略语给出定义和解释。*

### 3 设计目标

#### 3.1 实现的功能

*概要描述该模块要实现的功能。如果项目已有MRD，可在此分层次分条目列出功能点及子功能点。如果没有MRD,需在此列出要实现的功能点及子功能点，并对每一个功能点进行详细说明。功能点之间的层级和关联关系要明晰。*

#### 3.2 设计的性能指标

*模块接口平响、吞吐量、离线任务处理时长，资源占用（机器、cpu、内存）等*

### 4 系统环境（可选）

*本章节阐述功能的各种与其他功能模块的依赖，模块预置的限制，服务器软硬件需求以及数据预估规模*

#### 4.1 假设及与其它模块联系

*在这里加入模块成功的前提条件及与外界其它系统/模块的联系。采用文字分条列出或采用模块结构图描述均可。这也是搭建测试环境和编写上线策略需要关注的内容，如果相依赖的模块不完善，则需要开发相应的桩程序，在“6.6 测试考虑”中描述。与外界系统的详细接口，如果没有在单独的接口文档中定义，则在“6.4 ”中描述。*

#### 4.2 相关软件及硬件

*在这里加入系统所需的软, 硬件, 包括操作系统, 机器型号及配置要求。建议采用表格形式列出，最好还能规划出服务器和软件构件的部署图。该部分也可以单独编写部署设计文档，并在此引用。*

#### 4.3 模块限制

*在这里加入模块的已知, 或可预知的限制，例如上下游qps、超时限制等。*

#### 4.4 数据规模估计

*通过调研或经验，对数据规模进行估计，包括用户量、数据量、存储消耗及qps增长速度等方面。分类分条列出。*

### 5 设计思路及折衷

### 6 模块设计

*这个章节阐述功能模块的详细设计，应该具体描述对于主要数据结构、核心类、算法、数据库设计、配置项等等内容的修改。*

#### 6.1 架构图和业务处理流程说明

*模块架构图，包括分层设计、外部依赖、基础设施等等。*
*业务流程图对模块相关的实现流程和业务规则进行详细说明。描述实现流程时，建议采用流程图的方式，也可以采用伪码或文字描述。无论采取哪种方式，都要注意分支的完备性，特别是异常分支。*

#### 6.2 数据结构及说明

*说明在该模块中涉及到的核心表结构、类、数据schema等（可以以文字描述或代码的方式给出），并进行必要说明*

#### 6.3 算法描述（可选）

*对关键或复杂的算法进行描述，该节可根据需要进行裁剪。*

#### 6.4 与其它模块的接口

*说明模块调用的接口方式并进行定义，如接口的参数定义、返回值，接口数据结构和定义等。若需要使用外部提供的lib库，需要在设计阶段协调好将使用的版本，并在此进行说明。如果已在总体设计或接口设计中定义，可直接引用相关文档。*

#### 6.5 异常处理

*对模块中异常情况的处理进行说明，比如输入数据不合法、rpc调用失败、模块内部错误需要向外部模块返回的错误码及含义等。代码CR要关注异常处理要打足够监控+定位问题的日志信息（包括输入参数、异常原因、堆栈信息等），QA对异常情况添加监控*

#### 6.6 测试考虑

*说明从测试角度考虑设计方案，以及单元测试或联合测试需要考虑的关键事项。比如，测试计划、单元测试的思路、联合测试的重点、测试工具的开发和使用等。*

### 7 风险评估及对其它模块/系统影响（可选）

#### 7.1 已知的或可预知的风险

*在这里加上已经知道的或可能会发生的风险，包括技术、业务等方面。最好针对每个风险，列出相应的应对措施。特别是对NA端的影响*

#### 7.2 与其它模块/系统可能的影响

*在“4.1 ”中描述了该模块与其它模块的依赖关系。在这里描述这些依赖关系可能带来的影响。包括本模块对其它模块可能造成的影响以及其它模块可能给本模块造成的影响两个方面。*

### 8 数据迁移&刷新（可选）

*涉及存量数据需要批量迁移刷&新需要写明迁移&刷新方案。方案注明数据处理qps、对现有业务影响、执行时段、历史数据备份、数据回滚恢复预案等*

### 9 安全方案

*安全问题检查点，包括1、通用安全检查：xss、csrf、sql注入、文件上传漏洞；2、权限检查：MIS和service是否仅内网访问，CMS系统是否有开号校验、权益校验、本人资源校验、子账号关系校验，MIS和审核系统权限校验；3、数据检查：MIS系统数据权限检查、敏感数据脱敏，CMS只能查看本人或子账号资源数据，日志打印没有用户敏感信息。代码CR要重点关注”6.5 异常处理”、”7 风险评估及对其它模块/系统影响”、”9 安全方案”是否有完善的处理*

### 10 工作量拆分

拆分下具体的工作耗时情况，单测和P0也需要评估进来，可单独罗列，在向PM同步工作量及排期的时候，这部分也需要同步出来，避免PM或其他人质疑咱们的工作量。

| 功能点                  | 说明                                        | 交互方 | 负责人 | 工作量（人/天）                                              | 备注               |
| :---------------------- | :------------------------------------------ | :----- | :----- | :----------------------------------------------------------- | :----------------- |
| 功能点概括              | 功能点详细说明                              |        |        | 尽量细化的工作量，粒度最好不要超过0.5d，超过的请在备注说明下 | 其它需要备注的信息 |
| **示例：**投放计划创建  | 1.基本校验（权限/余额/名称重复/下限控制）； | 无     | 窦平方 | 0.5d                                                         |                    |
| 2.计划表创建&读写操作； | 无                                          | 窦平方 | 0.25d  |                                                              |                    |
| 3.预算同步；            | 交易中心                                    | 窦平方 | 0.25d  |                                                              |                    |
| 4.单测+P0               | 无                                          | 窦平方 | 0.5d   |                                                              |                    |
|                         |                                             |        |        |                                                              |                    |

### 11 设计评审意见

| No   | 问题描述 | 提出人 | 处理方式/说明 | 状态  |
| :--- | :------- | :----- | :------------ | :---- |
| 1    |          |        |               | Open  |
| 2    |          |        |               | Close |
| 3    |          |        |               |       |

*这里累计记录和跟踪该文档评审时发现的问题。*

### 12 附件及参考资料

*填写文档相关的附件或参考资料。若是不常变更的文档（比如调研报告），建议以对象方式插入到该文档中。如是经常变更的文档（比如接口文档），建议在此列出文件名即可。*
